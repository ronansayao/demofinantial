<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1342" height="632"><desc>title%20Transfer%20sequence%20diagram%0A%0Aparticipant%20TransactionController%0Aparticipant%20TransactionServicePort%0Aparticipant%20AccountRepository%0Aparticipant%20BalanceRepository%0Aparticipant%20PaymentRepository%0Aparticipant%20WalletRepository%0Aparticipant%20TransactionRepository%0A%0ATransactionController-%3ETransactionController%3Acalculate%20fee%0A%0ATransactionController-%3ETransactionServicePort%3Acall%20transfer(userId%2C%20amount)%0A%0ATransactionServicePort-%3EAccountRepository%3Acall%20checkUser(userId)%0A%0ATransactionController%3C--TransactionServicePort%3Athrows%20(AccountNotFoundException)%0A%0ATransactionServicePort-%3EBalanceRepository%3Acall%20checkBalance(userId)%0A%0ATransactionController%3C--TransactionServicePort%3Athrows%20(InsufficientFundsException)%0A%0ATransactionServicePort-%3EPaymentRepository%3Acall%20transfer(destinationAccount%2C%20amount)%0A%0ATransactionController%3C--TransactionServicePort%3Athrows%20(any%20exception)%0A%0ATransactionServicePort-%3EWalletRepository%3Acall%20transfer(userId%2C%20amount)%0A%0ATransactionServicePort-%3ETransactionRepository%3Acall%20save(transaction)%0A%0ATransactionController%3C--TransactionServicePort%3Atransction%20response%0A</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1342" height="632"/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16.5pt" font-style="normal" font-weight="normal" text-decoration="normal" x="537.0951339591211" y="22.6179738" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Transfer sequence diagram</text></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 93.68137437506641 88.511670804 L 93.68137437506641 632.8509069240001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 372.5775832361992 88.511670804 L 372.5775832361992 632.8509069240001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 558.5769262526054 88.511670804 L 558.5769262526054 632.8509069240001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 729.3907019192421 88.511670804 L 729.3907019192421 632.8509069240001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 902.6448004618554 88.511670804 L 902.6448004618554 632.8509069240001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1069.5046118950936 88.511670804 L 1069.5046118950936 632.8509069240001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1245.4601035651483 88.511670804 L 1245.4601035651483 632.8509069240001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 7.5393246000000005 47.799317964000004 L 179.82342415013284 47.799317964000004 L 179.82342415013284 88.511670804 L 7.5393246000000005 88.511670804 L 7.5393246000000005 47.799317964000004 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="23.899658982000005" y="73.43302160400002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">TransactionController</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 280.32756989912104 47.799317964000004 L 464.82759657327733 47.799317964000004 L 464.82759657327733 88.511670804 L 280.32756989912104 88.511670804 L 280.32756989912104 47.799317964000004 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="296.68790428112106" y="73.43302160400002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">TransactionServicePort</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 480.7111521123046 47.799317964000004 L 636.4427003929062 47.799317964000004 L 636.4427003929062 88.511670804 L 480.7111521123046 88.511670804 L 480.7111521123046 47.799317964000004 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="497.0714864943046" y="73.43302160400002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">AccountRepository</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 651.5213495929062 47.799317964000004 L 807.2600542455781 47.799317964000004 L 807.2600542455781 88.511670804 L 651.5213495929062 88.511670804 L 651.5213495929062 47.799317964000004 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="667.8816839749062" y="73.43302160400002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">BalanceRepository</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 822.3387034455781 47.799317964000004 L 982.9508974781328 47.799317964000004 L 982.9508974781328 88.511670804 L 822.3387034455781 88.511670804 L 822.3387034455781 47.799317964000004 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="838.6990378275781" y="73.43302160400002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">PaymentRepository</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 998.0295466781326 47.799317964000004 L 1140.9796771120546 47.799317964000004 L 1140.9796771120546 88.511670804 L 998.0295466781326 88.511670804 L 998.0295466781326 47.799317964000004 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1014.3898810601327" y="73.43302160400002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">WalletRepository</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1156.0583263120545 47.799317964000004 L 1334.861880818242 47.799317964000004 L 1334.861880818242 88.511670804 L 1156.0583263120545 88.511670804 L 1156.0583263120545 47.799317964000004 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1172.4186606940546" y="73.43302160400002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">TransactionRepository</text></g></g><g><g><g><rect fill="white" stroke="none" x="111.5244425950664" y="118.66896920400002" width="86.81471719652343" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="113.78623997506641" y="132.239753484" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">calculate fee</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 93.68137437506641 138.27121316400002 L 153.99597117506642 138.27121316400002 L 153.99597117506642 157.87345712400003 L 106.09612888306641 157.87345712400003" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(93.68137437506641,157.87345712400003) translate(-93.68137437506641,-157.87345712400003)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 106.24691537506641 151.59068662400003 L 93.68137437506641 157.87345712400003 L 106.24691537506641 164.15622762400002 Z"/></g></g><g><g><rect fill="white" stroke="none" x="139.23033706528125" y="180.491430924" width="187.79828348070313" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="141.49213444528124" y="194.062215204" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">call transfer(userId, amount)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 93.68137437506641 200.09367488400002 L 360.1628287281992 200.09367488400002" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(372.5775832361992,200.09367488400002) translate(-372.5775832361992,-200.09367488400002)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 360.0120422361992 193.81090438400003 L 372.5775832361992 200.09367488400002 L 360.0120422361992 206.37644538400002 Z"/></g></g><g><g><rect fill="white" stroke="none" x="390.42065145619915" y="222.711648684" width="150.31320657640626" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="392.68244883619917" y="236.282432964" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">call checkUser(userId)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 372.5775832361992 242.31389264400002 L 546.1621717446054 242.31389264400002" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(558.5769262526054,242.31389264400002) translate(-558.5769262526054,-242.31389264400002)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 546.0113852526054 236.03112214400002 L 558.5769262526054 242.31389264400002 L 546.0113852526054 248.59666314400002 Z"/></g></g><g><g><rect fill="white" stroke="none" x="111.52444259506639" y="264.93186644400004" width="243.21007242113282" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="113.7862399750664" y="278.5026507240001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">throws (AccountNotFoundException)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 372.5775832361992 284.53411040400005 L 106.09612888306641 284.53411040400005" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="6.03145968"/><g transform="translate(93.68137437506641,284.53411040400005) translate(-93.68137437506641,-284.53411040400005)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 106.24691537506641 278.251339904 L 93.68137437506641 284.53411040400005 L 106.24691537506641 290.8168809040001 Z"/></g></g><g><g><rect fill="white" stroke="none" x="464.8174608593417" y="307.15208420400006" width="172.33336343675782" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="467.0792582393417" y="320.72286848400006" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">call checkBalance(userId)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 372.5775832361992 326.75432816400007 L 716.9759474112421 326.75432816400007" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(729.3907019192421,326.75432816400007) translate(-729.3907019192421,-326.75432816400007)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 716.8251609192421 320.47155766400004 L 729.3907019192421 326.75432816400007 L 716.8251609192421 333.0370986640001 Z"/></g></g><g><g><rect fill="white" stroke="none" x="114.9201716600078" y="349.3723019640001" width="236.41861429125" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="117.1819690400078" y="362.94308624400014" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">throws (InsufficientFundsException)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 372.5775832361992 368.9745459240001 L 106.09612888306641 368.9745459240001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="6.03145968"/><g transform="translate(93.68137437506641,368.9745459240001) translate(-93.68137437506641,-368.9745459240001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 106.24691537506641 362.69177542400007 L 93.68137437506641 368.9745459240001 L 106.24691537506641 375.2573164240001 Z"/></g></g><g><g><rect fill="white" stroke="none" x="502.1549974963711" y="391.5925197240001" width="270.9123887053125" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="504.4167948763711" y="405.1633040040001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">call transfer(destinationAccount, amount)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 372.5775832361992 411.1947636840001 L 890.2300459538554 411.1947636840001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(902.6448004618554,411.1947636840001) translate(-902.6448004618554,-411.1947636840001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 890.0792594618554 404.9119931840001 L 902.6448004618554 411.1947636840001 L 890.0792594618554 417.47753418400015 Z"/></g></g><g><g><rect fill="white" stroke="none" x="157.1463145433086" y="433.81273748400014" width="151.96632852464845" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="159.40811192330858" y="447.3835217640002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">throws (any exception)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 372.5775832361992 453.41498144400015 L 106.09612888306641 453.41498144400015" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="6.03145968"/><g transform="translate(93.68137437506641,453.41498144400015) translate(-93.68137437506641,-453.41498144400015)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 106.24691537506641 447.1322109440001 L 93.68137437506641 453.41498144400015 L 106.24691537506641 459.6977519440002 Z"/></g></g><g><g><rect fill="white" stroke="none" x="627.1419558252949" y="476.03295524400016" width="187.79828348070313" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="629.4037532052948" y="489.60373952400016" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">call transfer(userId, amount)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 372.5775832361992 495.6351992040002 L 1057.0898573870936 495.6351992040002" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(1069.5046118950936,495.6351992040002) translate(-1069.5046118950936,-495.6351992040002)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1056.9390708950937 489.35242870400015 L 1069.5046118950936 495.6351992040002 L 1056.9390708950937 501.9179697040002 Z"/></g></g><g><g><rect fill="white" stroke="none" x="737.5191462404003" y="518.2531730040001" width="142.99939432054688" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="739.7809436204003" y="531.8239572840001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">call save(transaction)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 372.5775832361992 537.8554169640001 L 1233.0453490571483 537.8554169640001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(1245.4601035651483,537.8554169640001) translate(-1245.4601035651483,-537.8554169640001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1232.8945625651484 531.5726464640002 L 1245.4601035651483 537.8554169640001 L 1232.8945625651484 544.1381874640001 Z"/></g></g><g><g><rect fill="white" stroke="none" x="166.91476241928515" y="560.4733907640001" width="132.42943277269532" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="169.17655979928514" y="574.0441750440001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">transction response</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 372.5775832361992 580.0756347240001 L 106.09612888306641 580.0756347240001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="6.03145968"/><g transform="translate(93.68137437506641,580.0756347240001) translate(-93.68137437506641,-580.0756347240001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 106.24691537506641 573.7928642240001 L 93.68137437506641 580.0756347240001 L 106.24691537506641 586.3584052240001 Z"/></g></g></g><g/><g/><g/><g/><g/><g/><g/></g></svg>